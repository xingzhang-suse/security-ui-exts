import { IPlugin } from "@shell/core/types";
import {
  PRODUCT_NAME,
  PAGE,
  RESOURCE
} from "@pkg/types";

export function init($plugin: IPlugin, store: any) {
  const { product, virtualType, basicType } = $plugin.DSL(store, PRODUCT_NAME);

  product({
      icon: "pod_security",
      inStore: "cluster",
  });
  
  virtualType({
    labelKey: 'imageScanner.registries.title',
    name: PAGE.REGISTRIES,
    namespaced: false,
    route:    {
        name:   `c-cluster-${PRODUCT_NAME}-${PAGE.REGISTRIES}`,
        params: {
            product: PRODUCT_NAME
        },
        meta: { pkg: PRODUCT_NAME, product: PRODUCT_NAME }
    }
  });

  virtualType({
    labelKey: 'imageScanner.images.title',
    name: PAGE.IMAGE_OVERVIEW,
    namespaced: false,
    route:    {
        name:   `c-cluster-${PRODUCT_NAME}-${PAGE.IMAGE_OVERVIEW}`,
        params: {
            product: PRODUCT_NAME
        },
        meta: { pkg: PRODUCT_NAME, product: PRODUCT_NAME }
    }
  });

  virtualType({
    labelKey: "imageScanner.dashboard.title",
    name: PAGE.DASHBOARD,
    namespaced: false,
    route: {
      name: `c-cluster-${PRODUCT_NAME}-${PAGE.DASHBOARD}`,
      params: {
        product: PRODUCT_NAME,
      },
      meta: { pkg: PRODUCT_NAME, product: PRODUCT_NAME },
    },
  });

  virtualType({
    labelKey: "imageScanner.vulnerabilities.title",
    name: PAGE.VULNERABILITY_OVERVIEW,
    namespaced: false,
    route: {
      name: `c-cluster-${PRODUCT_NAME}-${PAGE.VULNERABILITY_OVERVIEW}`,
      params: {
        product: PRODUCT_NAME,
      },
      meta: { pkg: PRODUCT_NAME, product: PRODUCT_NAME },
    },
  });

  virtualType({
    labelKey: "imageScanner.vexManagement.title",
    name: PAGE.VEX_MANAGEMENT,
    namespaced: false,
    route: {
      name: `c-cluster-${PRODUCT_NAME}-${PAGE.VEX_MANAGEMENT}`,
      params: {
        product: PRODUCT_NAME,
      },
      meta: { pkg: PRODUCT_NAME, product: PRODUCT_NAME },
    },
  });

  virtualType({
    label: "Components Demo",
    name: "demo",
    namespaced: false,
    route: {
      name: `c-cluster-${PRODUCT_NAME}-demo`,
      params: {
        product: PRODUCT_NAME,
      },
      meta: { pkg: PRODUCT_NAME, product: PRODUCT_NAME },
    },
  });

  basicType([
      PAGE.DASHBOARD,
      PAGE.IMAGE_OVERVIEW,
      PAGE.VULNERABILITY_OVERVIEW,
      //"demo"
  ]);
  // Prepend spaces on group name, as Rancher 2.12 render group name algin with sidemenu
  basicType([PAGE.REGISTRIES, PAGE.VEX_MANAGEMENT, RESOURCE.VEX_HUB], '&nbsp;&nbsp;&nbsp;&nbsp;Advanced');

}