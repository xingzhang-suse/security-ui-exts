(("undefined"!==typeof self?self:this)["webpackChunksbomscanner_ui_ext_0_6_0_pre"]=("undefined"!==typeof self?self:this)["webpackChunksbomscanner_ui_ext_0_6_0_pre"]||[]).push([[739],{26943:function(e,a,t){"use strict";t.r(a);var r=t(36758),n=t.n(r),l=t(40935),s=t.n(l),o=s()(n());o.push([e.id,".registry-input-label[data-v-e0e2820a]{margin-bottom:16px;font-size:16px;line-height:20px;font-weight:400;font-family:Lato,sans-serif;color:var(--disabled-text);display:block}.mt-24[data-v-e0e2820a]{margin-top:24px}.text-label[data-v-e0e2820a]{color:var(--input-label);font-size:12px}",""]),a["default"]=o},35397:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f}});var r=t(9274);const n={class:"filled-height"},l={class:"row"},s={class:"col span-9"},o={class:"row mt-16"};function i(e,a,t,i,c,u){const d=(0,r.resolveComponent)("NameNsDescription"),p=(0,r.resolveComponent)("LabeledInput"),m=(0,r.resolveComponent)("Checkbox"),v=(0,r.resolveComponent)("CruResource");return(0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createVNode)(v,{"done-route":e.doneRoute,mode:e.mode,resource:e.value,subtypes:[],"validation-passed":!0,errors:c.errors,"cancel-event":!0,onError:a[3]||(a[3]=e=>c.errors=e),onFinish:e.save,onCancel:e.done},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(d,{value:e.value,mode:e.mode,namespaced:!1,"description-placeholder":"imageScanner.vexManagement.cru.desc.placeholder","onUpdate:value":a[0]||(a[0]=a=>e.$emit("input",a))},null,8,["value","mode"]),(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",s,[(0,r.createVNode)(p,{value:e.value.spec.url,"onUpdate:value":a[1]||(a[1]=a=>e.value.spec.url=a),mode:e.mode,label:e.t("imageScanner.vexManagement.cru.uri.label"),"placeholder-key":"imageScanner.vexManagement.cru.uri.placeholder",required:!0},null,8,["value","mode","label"])])]),(0,r.createElementVNode)("div",o,[(0,r.createVNode)(m,{value:e.value.spec.enabled,"onUpdate:value":a[2]||(a[2]=a=>e.value.spec.enabled=a),tooltip:e.t("imageScanner.vexManagement.cru.enable.tooltip"),"data-testid":"imageScanner-vexManagement-cru-enable-checkbox",class:"check",type:"checkbox","label-key":"imageScanner.vexManagement.cru.enable.label",mode:e.mode},null,8,["value","tooltip","mode"])])]),_:1},8,["done-route","mode","resource","errors","onFinish","onCancel"])])}var c=t(40527),u=t(95162),d=t(42200),p=t(69552),m=t(91825),v=t(74724),g={name:"CruVexHub",components:{LabeledInput:p.o,NameNsDescription:c.A,CruResource:u.A,Checkbox:d.S},mixins:[m.A],data(){return this.value.spec||(this.value.spec={url:"",enabled:!0}),{errors:null,PAGE:v.KL,PRODUCT_NAME:v.KR}}},h=(t(97366),t(47433));const b=(0,h.A)(g,[["render",i],["__scopeId","data-v-1d5686a6"]]);var f=b},53403:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return ne}});var r=t(9274);const n={class:"filled-height"},l={class:"registry-input-label"},s={class:"row"},o={class:"col span-6"},i={class:"col span-6"},c={class:"row mt-20"},u={class:"col span-6"},d={class:"mt-10"},p={class:"col span-6"},m={class:"mt-10"},v={class:"registry-input-label mt-24"},g={class:"row"},h={class:"col span-6"},b={key:0,class:"row"},f={class:"col span-12"},S={class:"m-0 mb-5"},N=["href"],y={class:"m-0"},V={class:"row"},E={class:"col span-6"},C={class:"col span-3"},k={class:"registry-input-label mt-24"},_={key:1,class:"row mb-5"},x={class:"col span-3"},A={class:"text-label"},w={class:"col span-3"},I={class:"text-label"},T={class:"col span-3"},L={class:"text-label"},D={class:"col span-3"},O={class:"col span-3"},B={class:"col span-3"},R={class:"col span-1"},U=["onClick"],P={class:"row mt-10"},M={class:"col span-12"};function $(e,a,t,$,F,Y){const G=(0,r.resolveComponent)("NameNsDescription"),K=(0,r.resolveComponent)("LabeledSelect"),q=(0,r.resolveComponent)("LabeledInput"),z=(0,r.resolveComponent)("FileSelector"),j=(0,r.resolveComponent)("Checkbox"),J=(0,r.resolveComponent)("Banner"),H=(0,r.resolveComponent)("CruResource");return(0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createVNode)(H,{"done-route":e.doneRoute,mode:e.mode,resource:e.value,subtypes:[],errors:F.errors,"validation-passed":Y.validationPassed,onFinish:Y.finish,onCancel:e.done},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(G,{"name-label":"imageScanner.registries.configuration.cru.registry.label",value:e.value,mode:e.mode,"onUpdate:value":a[0]||(a[0]=a=>e.$emit("input",a))},null,8,["value","mode"]),(0,r.createElementVNode)("div",l,(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.registry.label")),1),(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",o,[(0,r.createVNode)(K,{value:e.value.spec.catalogType,"onUpdate:value":a[1]||(a[1]=a=>e.value.spec.catalogType=a),"data-testid":"registry-type-select",label:e.t("imageScanner.registries.configuration.cru.registry.type.label"),options:Y.REGISTRY_TYPE_OPTIONS,"option-key":"value","option-label":"label",required:""},null,8,["value","label","options"])]),(0,r.createElementVNode)("div",i,[(0,r.createVNode)(q,{value:e.value.spec.uri,"onUpdate:value":a[2]||(a[2]=a=>e.value.spec.uri=a),label:e.t("imageScanner.registries.configuration.cru.registry.uri.label"),placeholder:e.t("imageScanner.registries.configuration.cru.registry.uri.placeholder"),required:""},null,8,["value","label","placeholder"])])]),(0,r.createElementVNode)("div",c,[(0,r.createElementVNode)("div",u,[(0,r.createVNode)(q,{value:e.value.spec.caBundle,"onUpdate:value":a[3]||(a[3]=a=>e.value.spec.caBundle=a),type:"multiline",label:"CA Cert Bundle",style:{"max-height":"110px","overflow-y":"auto"},"data-testid":"auth-ca-bundle-input",placeholder:e.t("imageScanner.registries.configuration.cru.registry.caBundle.placeholder")},null,8,["value","placeholder"]),(0,r.createElementVNode)("div",d,[(0,r.createVNode)(z,{class:"btn btn-sm role-tertiary",label:e.t("generic.readFromFile"),onSelected:Y.onFileSelected},null,8,["label","onSelected"])])]),(0,r.createElementVNode)("div",p,[(0,r.createElementVNode)("div",m,[(0,r.createVNode)(j,{value:e.value.spec.insecure,"onUpdate:value":a[4]||(a[4]=a=>e.value.spec.insecure=a),label:e.t("imageScanner.registries.configuration.cru.registry.insecure.label"),tooltip:e.t("imageScanner.registries.configuration.cru.registry.insecure.tooltip"),"data-testid":"auth-insecure-checkbox"},null,8,["value","label","tooltip"])])])]),(0,r.createElementVNode)("div",v,(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.label")),1),(0,r.createElementVNode)("div",g,[(0,r.createElementVNode)("div",h,[(0,r.createVNode)(K,{value:e.value.spec.authSecret,"onUpdate:value":a[5]||(a[5]=a=>e.value.spec.authSecret=a),"data-testid":"auth-secret-select",label:e.t("imageScanner.registries.configuration.cru.authentication.label"),mode:e.mode,options:Y.options,loading:F.authLoading},null,8,["value","label","mode","options","loading"])])]),"create"===e.value.spec.authSecret?((0,r.openBlock)(),(0,r.createElementBlock)("div",b,[(0,r.createElementVNode)("div",f,[(0,r.createVNode)(J,{color:"info"},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("p",S,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine1_start"))+" ",1),(0,r.createElementVNode)("a",{href:Y.secretCreateUrl,target:"_blank"},(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine1_link")),9,N),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine1_end")),1)]),(0,r.createElementVNode)("p",y,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine2_start"))+" ",1),(0,r.createElementVNode)("a",{href:"#",onClick:a[6]||(a[6]=(0,r.withModifiers)((...e)=>Y.refreshList&&Y.refreshList(...e),["prevent"]))},(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine2_link")),1),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine2_end")),1)])])]),_:1})])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["registry-input-label",{"mt-24":"create"!==e.value.spec.authSecret}])},(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.scan.label")),3),(0,r.createElementVNode)("div",V,[(0,r.createElementVNode)("div",E,[(0,r.createVNode)(K,{value:Y.repoNames,"onUpdate:value":a[7]||(a[7]=e=>Y.repoNames=e),"data-testid":"registry-scanning-repository-names",taggable:!0,searchable:!0,"push-tags":!0,"close-on-select":!1,mode:e.mode,multiple:!0,label:e.t("imageScanner.registries.configuration.cru.scan.repoName"),placeholder:e.value.spec.catalogType===Y.REGISTRY_TYPE.OCI_DISTRIBUTION?e.t("imageScanner.registries.configuration.cru.scan.placeholder.ociDistribution"):e.t("imageScanner.registries.configuration.cru.scan.placeholder.nocatalog"),options:Y.repoNames,disabled:"view"===e.mode,required:e.value.spec.catalogType===Y.REGISTRY_TYPE.NO_CATALOG},null,8,["value","mode","label","placeholder","options","disabled","required"])]),(0,r.createElementVNode)("div",C,[(0,r.createVNode)(K,{value:Y.selectedScanInterval,"onUpdate:value":a[8]||(a[8]=e=>Y.selectedScanInterval=e),"data-testid":"registry-scanning-interval-select",placeholder:e.t("imageScanner.registries.configuration.cru.scan.schedule.placeholder",{manualScan:e.t("imageScanner.registries.configuration.cru.scan.schedule.manualScan")}),options:Y.SCAN_INTERVAL_OPTIONS,"option-key":"value","option-label":"label",label:e.t("imageScanner.registries.configuration.cru.scan.schedule.label"),required:""},null,8,["value","placeholder","options","label"])])]),(0,r.createElementVNode)("div",k,(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.filters.label")),1),e.value.spec.platforms&&e.value.spec.platforms.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",_,[(0,r.createElementVNode)("div",x,[(0,r.createElementVNode)("label",A,(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.filters.os")||"OS"),1)]),(0,r.createElementVNode)("div",w,[(0,r.createElementVNode)("label",I,(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.filters.arch")||"Architecture"),1)]),(0,r.createElementVNode)("div",T,[(0,r.createElementVNode)("label",L,(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.filters.variant")||"Variable"),1)]),a[10]||(a[10]=(0,r.createElementVNode)("div",{class:"col span-1"},null,-1))])):(0,r.createCommentVNode)("",!0),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.value.spec.platforms,(a,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"row mb-10 align-center"},[(0,r.createElementVNode)("div",D,[(0,r.createVNode)(K,{value:a.os,"onUpdate:value":[e=>a.os=e,e=>Y.updateOS(a,e)],options:F.osOptions},null,8,["value","onUpdate:value","options"])]),(0,r.createElementVNode)("div",O,[(0,r.createVNode)(K,{value:a.arch,"onUpdate:value":[e=>a.arch=e,e=>Y.updateArch(a,e)],options:Y.getArchOptions(a.os),disabled:!a.os},null,8,["value","onUpdate:value","options","disabled"])]),(0,r.createElementVNode)("div",B,[(0,r.createVNode)(K,{value:a.variant,"onUpdate:value":e=>a.variant=e,options:Y.getVariantOptions(a.arch),disabled:!Y.isVariantSupported(a.arch)},null,8,["value","onUpdate:value","options","disabled"])]),(0,r.createElementVNode)("div",R,[e.isView?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,type:"button",class:"btn role-link",style:{padding:"0"},onClick:e=>Y.removePlatform(t)},(0,r.toDisplayString)(e.t("generic.remove")||"Remove"),9,U))])]))),128)),(0,r.createElementVNode)("div",P,[(0,r.createElementVNode)("div",M,[e.isView?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,type:"button",class:"btn btn-sm role-tertiary",onClick:a[9]||(a[9]=(...e)=>Y.addPlatform&&Y.addPlatform(...e))},(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.filters.add")),1))])])]),_:1},8,["done-route","mode","resource","errors","validation-passed","onFinish","onCancel"])])}var F=t(91825),Y=t(69552),G=t(42200),K=t(20491),q=t(40527),z=t(95162),j=t(96234),J=t(68745),H=t(35664),Q=t(53838),W=t(64470),X=t(17259);const Z={linux:["amd64","arm","arm64","s390x","386","loong64","mips","mipsle","mips64","mips64le","ppc64","ppc64le","riscv64"],aix:["ppc64"],android:["amd64","arm","arm64","386"],darwin:["amd64","arm64"],dragonfly:["amd64"],freebsd:["amd64","arm","386"],illumos:["amd64"],ios:["arm64"],js:["wasm"],netbsd:["amd64","arm","386"],openbsd:["amd64","arm","arm64","386"],plan9:["amd64","arm","386"],solaris:["amd64"],wasip1:["wasm"],windows:["amd64","arm","arm64","386"]},ee={arm:["v6","v7","v8"],arm64:["v8"]};var ae={name:"CruRegistry",components:{LabeledInput:Y.o,Checkbox:G.S,FileSelector:K.A,NameNsDescription:q.A,CruResource:z.A,LabeledSelect:j.A,Banner:J.A},mixins:[F.A],async fetch(){this.allSecrets=await this.$store.dispatch(`${this.inStore}/findAll`,{type:H.bB})},data(){this.value.spec||(this.value.spec={catalogType:Q.ng.OCI_DISTRIBUTION,authSecret:"",uri:"",repositories:[],scanInterval:Q.nb.MANUAL,caBundle:"",insecure:!1}),this.value.spec.platforms||(this.value.spec.platforms=[]),void 0===this.value.spec.insecure&&(this.value.spec.insecure=!1),void 0===this.value.spec.caBundle&&(this.value.spec.caBundle=""),null===this.value.spec.scanInterval&&(this.value.spec.scanInterval=Q.nb.MANUAL);const e=Object.keys(Z).map(e=>({label:e,value:e}));return{inStore:this.$store.getters["currentProduct"].inStore,errors:null,allSecrets:null,filteredSecrets:null,PAGE:W.KL,PRODUCT_NAME:W.KR,authLoading:!1,osOptions:e}},computed:{repoNames:{get(){return(this.value.spec.repositories||[]).map(e=>e.name)},set(e){this.value.spec.repositories=e.map(e=>({name:e}))}},options(){const e=[{label:this.t("imageScanner.registries.configuration.cru.authentication.create"),value:"create",kind:"highlighted"},{label:"divider",disabled:!0,kind:"divider"},{label:this.t("generic.none"),value:""}];if(!this.allSecrets)return e;const a=this.value.metadata?.namespace??"default",t=this.allSecrets.filter(e=>e.metadata.namespace===a&&e._type===X.J.DOCKER_JSON).map(e=>{const a=e.metadata.name;return{label:a,value:a}});return[...e,...t]},SCAN_INTERVAL_OPTIONS(){return Q.FW},selectedScanInterval:{get(){const e=this.value.spec.scanInterval;return e&&e!==Q.nb.MANUAL?e:Q.nb.MANUAL},set(e){this.value.spec.scanInterval=e}},REGISTRY_TYPE_OPTIONS(){return Q.Qk},REGISTRY_TYPE(){return Q.ng},validationPassed(){const e=this.value?.spec||{},a=!!this.value?.metadata?.name?.trim(),t=!!e.catalogType,r=!!e.uri?.trim(),n=e.catalogType===Q.ng.NO_CATALOG,l=!n||!!e.repositories?.length,s="create"!==e.authSecret;return a&&t&&r&&l&&s},secretCreateUrl(){const e=this.$route.params.cluster;return`${W.$O.includes(window.location.host)?"":"/dashboard"}/c/${e}/explorer/secret/create?scope=namespaced`}},methods:{async finish(e){this.value.spec.scanInterval===Q.nb.MANUAL&&delete this.value.spec.scanInterval,this.cleanPlatforms();try{await this.save(e)}catch(a){this.errors=[a]}finally{this.errors&&0!==this.errors.length||this.$router.push({name:`c-cluster-${W.KR}-resource`,params:{cluster:this.$route.params.cluster,product:W.KR}})}},async refreshList(){this.authLoading=!0;try{this.allSecrets=await this.$store.dispatch(`${this.inStore}/findAll`,{type:H.bB})}catch(e){this.errors=[e]}finally{this.authLoading=!1}},onFileSelected(e){this.value.spec.caBundle=e},addPlatform(){this.value.spec.platforms.push({os:"linux",arch:"amd64",variant:""})},removePlatform(e){this.value.spec.platforms.splice(e,1)},getArchOptions(e){const a=Z[e]||[];return a.map(e=>({label:e,value:e}))},getVariantOptions(e){const a=ee[e]||[];return a.map(e=>({label:e,value:e}))},updateOS(e,a){e.os=a;const t=Z[a];t&&t.length>0?e.arch=t.includes("amd64")?"amd64":t[0]:e.arch="",e.variant=""},updateArch(e,a){e.arch=a,this.isVariantSupported(a)||(e.variant="")},isVariantSupported(e){return!!ee[e]},cleanPlatforms(){if(!this.value.spec.platforms)return;const e=new Set;this.value.spec.platforms=this.value.spec.platforms.filter(a=>{if(!a.os||!a.arch)return!1;const t=`${a.os}-${a.arch}-${a.variant||""}`;return!e.has(t)&&(e.add(t),!0)})}}},te=(t(67199),t(47433));const re=(0,te.A)(ae,[["render",$],["__scopeId","data-v-e0e2820a"]]);var ne=re},58774:function(e,a,t){"use strict";t.r(a);var r=t(36758),n=t.n(r),l=t(40935),s=t.n(l),o=s()(n());o.push([e.id,".mt-16[data-v-1d5686a6]{margin-top:16px}",""]),a["default"]=o},67199:function(e,a,t){var r=t(26943);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=t(74825).A;n("1e596dc5",r,!0,{sourceMap:!1,shadowMode:!1})},97366:function(e,a,t){var r=t(58774);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=t(74825).A;n("ced37f82",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=sbomscanner-ui-ext-0.6.0-pre.umd.min.edit.js.map