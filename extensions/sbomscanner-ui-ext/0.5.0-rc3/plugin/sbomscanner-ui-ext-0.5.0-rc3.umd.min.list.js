(("undefined"!==typeof self?self:this)["webpackChunksbomscanner_ui_ext_0_5_0_rc3"]=("undefined"!==typeof self?self:this)["webpackChunksbomscanner_ui_ext_0_5_0_rc3"]||[]).push([[715],{1293:function(e,t,a){"use strict";a.d(t,{A:function(){return c}});var s=a(9274);function r(e,t,a,r,i,n){return(0,s.openBlock)(),(0,s.createElementBlock)("div",{class:(0,s.normalizeClass)(["badge",n.statusClass])},[a.status?((0,s.openBlock)(),(0,s.createElementBlock)("div",{key:0,class:(0,s.normalizeClass)(["text",n.statusClass])},(0,s.toDisplayString)(e.t(`imageScanner.enum.status.${a.status.toLowerCase()}`)),3)):(0,s.createCommentVNode)("",!0)],2)}var i=a(64470),n={name:"StatusBadge",props:{status:{type:String,default:""}},computed:{statusClass(){switch(this.status){case i.nl.PENDING:return"pending";case i.nl.SCHEDULED:return"scheduled";case i.nl.IN_PROGRESS:return"in-progress";case i.nl.COMPLETE:return"complete";case i.nl.FAILED:return"failed";case i.vw.DISABLED:return"disabled";case i.vw.ENABLED:return"enabled";default:return"none"}}}},o=(a(35185),a(47433));const l=(0,o.A)(n,[["render",r],["__scopeId","data-v-6ae8845a"]]);var c=l},3607:function(e,t,a){"use strict";a.d(t,{A:function(){return d}});var s=a(9274);const r=["disabled"];function i(e,t,a,i,n,o){return(0,s.openBlock)(),(0,s.createElementBlock)("button",{class:"btn role-primary scan-btn",disabled:o.disableBtn,onClick:t[0]||(t[0]=e=>o.startScan())},[t[1]||(t[1]=(0,s.createElementVNode)("i",{class:"icon icon-play"},null,-1)),(0,s.createTextVNode)(" "+(0,s.toDisplayString)(e.t("imageScanner.registries.button.startScan")||"Enable"),1)],8,r)}var n=a(64470),o={name:"ScanButton",props:{selectedRegistries:{type:Array,default:()=>[]},reloadFn:{type:Function,required:!0}},methods:{async startScan(){this.selectedRegistries&&this.selectedRegistries.length&&this.selectedRegistries.forEach(async e=>{const t=await this.$store.dispatch("cluster/create",{type:n.bD.SCAN_JOB,metadata:{generateName:e.name,namespace:e.namespace},spec:{registry:e.name}});try{await t.save(),this.$store.dispatch("growl/success",{title:this.t("imageScanner.registries.messages.registryScanComplete"),message:this.t("imageScanner.registries.messages.registryScanComplete",{name:e.name})})}catch(a){this.$store.dispatch("growl/error",{title:this.t("imageScanner.registries.messages.registryScanFailed"),message:a.message})}finally{this.reloadFn&&this.reloadFn()}})}},computed:{disableBtn(){return!(this.selectedRegistries&&this.selectedRegistries.length)}}},l=(a(16536),a(47433));const c=(0,l.A)(o,[["render",i],["__scopeId","data-v-1e454b60"]]);var d=c},11098:function(e,t,a){"use strict";e.exports=a.p+"img/refresh.196c0c42.svg"},12003:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),i=a(40935),n=a.n(i),o=n()(r());o.push([e.id,".chart-section[data-v-70087338]{display:flex;padding:16px;flex-direction:column;align-items:flex-start;gap:12px;flex:1 0 0;border-right:solid var(--border-width) var(--input-border)}.chart-section .title[data-v-70087338]{display:flex;align-items:center;gap:8px;font-family:Lato;font-size:18px;font-style:normal;font-weight:400;line-height:21px;margin-right:8px}.chart-section .status-list[data-v-70087338]{padding:4px 8px;align-items:center;align-self:stretch}",""]),t["default"]=o},16536:function(e,t,a){var s=a(95463);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("6930e8cb",s,!0,{sourceMap:!1,shadowMode:!1})},18957:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),i=a(40935),n=a.n(i),o=a(20062),l=a.n(o),c=new URL(a(70922),a.b),d=new URL(a(11098),a.b),u=n()(r()),p=l()(c),g=l()(d);u.push([e.id,".page[data-v-0ba7aea9]{display:flex;flex-direction:column;padding:24px;min-height:100%}.header-section[data-v-0ba7aea9]{gap:24px;align-self:stretch}.header-left[data-v-0ba7aea9],.header-section[data-v-0ba7aea9]{display:flex;align-items:flex-start}.header-left[data-v-0ba7aea9]{flex-direction:column;justify-content:center;gap:4px;flex:1 0 0}.title-wrap[data-v-0ba7aea9]{display:flex;align-items:center;gap:12px;align-self:stretch}.title-wrap .title[data-v-0ba7aea9]{font-family:Lato;font-size:24px;font-style:normal;font-weight:400;line-height:32px}.state[data-v-0ba7aea9]{display:-webkit-box;max-width:900px;-webkit-line-clamp:1;align-self:stretch}.state[data-v-0ba7aea9],.state .state-date-time[data-v-0ba7aea9]{-webkit-box-orient:vertical;line-clamp:1;overflow:hidden;color:var(--disabled-text);text-overflow:ellipsis;font-family:Lato;font-size:14px;font-style:normal;font-weight:400;line-height:21px}.header-right[data-v-0ba7aea9]{display:flex;align-items:flex-end;justify-content:end;flex:1 0 0;gap:16px}.header-btn[data-v-0ba7aea9]{height:40px}.icon-add[data-v-0ba7aea9]{background:url("+p+") no-repeat 50%;background-size:contain}.icon-add[data-v-0ba7aea9],.icon-refresh-ss[data-v-0ba7aea9]{width:16px;height:16px;margin-right:12px}.icon-refresh-ss[data-v-0ba7aea9]{background:url("+g+") no-repeat 50%;background-size:contain}.summary-section[data-v-0ba7aea9]{display:flex;min-width:912px;align-items:flex-start;align-self:stretch;border-radius:6px;border:solid var(--border-width) var(--input-border);background:var(--input-bg);margin:24px 0 0 0}.score-input[data-v-0ba7aea9]{color:#bec1d2}.score-input[data-v-0ba7aea9]::-moz-placeholder{color:#bec1d2}.score-input[data-v-0ba7aea9]::placeholder{color:#bec1d2}",""]),t["default"]=u},19917:function(e,t,a){var s=a(84941);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("298142c4",s,!0,{sourceMap:!1,shadowMode:!1})},20062:function(e){"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},31686:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(9274);function r(e,t,a,r,i,n){const o=(0,s.resolveComponent)("VexManagement"),l=(0,s.resolveComponent)("ResourceTable");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[(0,s.createVNode)(o),(0,s.createVNode)(l,{ref:"rt",schema:n.schema,rows:i.rows,loading:e.$fetchState.pending,namespaced:!1,headers:i.headers,"key-field":"id","table-actions":!0,"use-query-params-for-simple-filtering":!0,"force-update-live-and-delayed":i.forceUpdateKey},null,8,["schema","rows","loading","headers","force-update-live-and-delayed"])])}var i=a(64470),n=a(55008),o=a(65165);const l={class:"page"},c={class:"header-section"},d={class:"header-left"},u={class:"description"};function p(e,t,a,r,i,n){return(0,s.openBlock)(),(0,s.createElementBlock)("div",l,[(0,s.createElementVNode)("div",c,[(0,s.createElementVNode)("div",d,[(0,s.createElementVNode)("div",u,(0,s.toDisplayString)(e.t("imageScanner.vexManagement.description")),1)])])])}var g={name:"VexManagement"},m=(a(19917),a(47433));const h=(0,m.A)(g,[["render",p],["__scopeId","data-v-5221925a"]]);var f=h,y={name:"VexManagementList",components:{ResourceTable:n.A,VexManagement:f},data(){return{PRODUCT_NAME:i.KR,headers:o.Nw,disabled:!1,selectedRows:[],filterText:"",rows:[],forceUpdateKey:0}},async fetch(){await this.$store.dispatch("cluster/findAll",{type:i.bD.VEX_HUB});const e=this.$store.getters["cluster/all"]?.(i.bD.VEX_HUB);this.rows=e||[]},methods:{rowWithActions(e){return e},async switchStatus(e,t){const a=t&&t.length?t:this.selectedRows||[];a.length&&(await Promise.all(a.map(async t=>{t.spec={...t.spec||{},enabled:e},await t.save()})),await this.$fetch())}},computed:{schema(){return this.$store.getters["cluster/schemaFor"]?.(i.bD.VEX_HUB)}}};const b=(0,m.A)(y,[["render",r]]);var v=b},35185:function(e,t,a){var s=a(81105);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("b5753eba",s,!0,{sourceMap:!1,shadowMode:!1})},45709:function(e,t,a){var s=a(18957);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("1f9a9167",s,!0,{sourceMap:!1,shadowMode:!1})},47073:function(e,t,a){var s=a(56462);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("42bbed3c",s,!0,{sourceMap:!1,shadowMode:!1})},56462:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),i=a(40935),n=a.n(i),o=n()(r());o.push([e.id,".table-top-left[data-v-adf8cebc]{display:flex;align-items:center;justify-content:start;flex:1 0 0;gap:16px}.table-top-left .table-btn[data-v-adf8cebc]{height:40px}.selected-count[data-v-adf8cebc]{font-weight:400}.search-filters[data-v-adf8cebc]{margin-top:24px}.filter-row[data-v-adf8cebc]{display:flex;gap:24px;margin-bottom:20px}.filter-item[data-v-adf8cebc]{display:flex;flex-direction:column;gap:8px;flex:1}.filter-item label[data-v-adf8cebc]{font-weight:400;color:var(--disabled-text);font-size:14px}.filter-input-wrapper[data-v-adf8cebc]{display:flex;align-items:center;border:solid var(--border-width) var(--input-border);border-radius:6px;padding:0 12px;background:var(--input-bg)}.filter-input[data-v-adf8cebc]{flex:1;padding:10px 0;border:none;outline:none;font-size:14px;line-height:19px;background:transparent}.filter-input[data-v-adf8cebc]:focus{outline:none}.filter-input-wrapper[data-v-adf8cebc]:focus-within{border-color:#007cba;box-shadow:0 0 0 2px rgba(0,124,186,.1)}.filter-select[data-v-adf8cebc]{padding:10px 14px;border:1px solid #dcdee7;border-radius:6px;font-size:14px;background:#fff;outline:none}.filter-select[data-v-adf8cebc]:focus{border-color:#007cba;box-shadow:0 0 0 2px rgba(0,124,186,.1)}.filter-actions[data-v-adf8cebc]{display:flex;justify-content:flex-start;align-items:center;gap:8px;padding-top:16px;border-top:1px solid #dcdee7}.state-date-time[data-v-adf8cebc]{overflow:hidden;-webkit-box-orient:vertical;line-clamp:1;color:var(--disabled-text);text-overflow:ellipsis;font-family:Lato;font-size:14px;font-style:normal;font-weight:400;line-height:21px}",""]),t["default"]=o},64067:function(e,t,a){var s=a(12003);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("09ecaa08",s,!0,{sourceMap:!1,shadowMode:!1})},65921:function(e,t,a){"use strict";a.d(t,{V:function(){return r}});var s=a(64470);function r(e){const t=e["cluster/schemaFor"](s.bD.REGISTRY)?.resourceMethods||[],a=t.includes("PUT"),r=t.includes("DELETE");return{canEdit:a,canDelete:r}}},70756:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return be}});var s=a(9274);const r={class:"state"},i={class:"state-date-time"},n={class:"search-filters"},o={class:"filter-row"},l={class:"filter-item"},c={class:"filter-input-wrapper"},d=["placeholder"],u={class:"filter-item"},p={class:"filter-input-wrapper"},g=["placeholder"],m={class:"filter-item"},h={class:"filter-input-wrapper"},f=["placeholder"],y={class:"filter-item"},b={class:"filter-input-wrapper"},v=["placeholder"],S={class:"filter-item"},x={class:"table-top-left"},w=["disabled"],R={key:2,class:"selected-count"};function T(e,t,a,T,E,k){const D=(0,s.resolveComponent)("RegistriesOverview"),C=(0,s.resolveComponent)("LabeledSelect"),N=(0,s.resolveComponent)("ScanButton"),V=(0,s.resolveComponent)("PaginatedResourceTable");return(0,s.openBlock)(),(0,s.createElementBlock)(s.Fragment,null,[(0,s.createElementVNode)("div",r,[t[6]||(t[6]=(0,s.createTextVNode)(" State as of ",-1)),(0,s.createElementVNode)("span",i,(0,s.toDisplayString)(k.latestUpdateDateText)+"    "+(0,s.toDisplayString)(k.latestUpdateTimeText),1)]),(0,s.createVNode)(D),(0,s.createElementVNode)("div",n,[(0,s.createElementVNode)("div",o,[(0,s.createElementVNode)("div",l,[(0,s.createElementVNode)("label",null,(0,s.toDisplayString)(e.t("imageScanner.registries.registrytable.header.registry")),1),(0,s.createElementVNode)("div",c,[(0,s.withDirectives)((0,s.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>E.filters.registrySearch=e),type:"text",placeholder:e.t("imageScanner.registries.registrytable.filters.placeholder.name"),class:"filter-input"},null,8,d),[[s.vModelText,E.filters.registrySearch]]),t[7]||(t[7]=(0,s.createElementVNode)("i",{class:"icon icon-search",style:{color:"#6C6C76","margin-left":"8px"}},null,-1))])]),(0,s.createElementVNode)("div",u,[(0,s.createElementVNode)("label",null,(0,s.toDisplayString)(e.t("imageScanner.registries.registrytable.header.namespace")),1),(0,s.createElementVNode)("div",p,[(0,s.withDirectives)((0,s.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>E.filters.namespaceSearch=e),type:"text",placeholder:e.t("imageScanner.registries.registrytable.filters.placeholder.name"),class:"filter-input"},null,8,g),[[s.vModelText,E.filters.namespaceSearch]]),t[8]||(t[8]=(0,s.createElementVNode)("i",{class:"icon icon-search",style:{color:"#6C6C76","margin-left":"8px"}},null,-1))])]),(0,s.createElementVNode)("div",m,[(0,s.createElementVNode)("label",null,(0,s.toDisplayString)(e.t("imageScanner.registries.registrytable.header.uri")),1),(0,s.createElementVNode)("div",h,[(0,s.withDirectives)((0,s.createElementVNode)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>E.filters.uriSearch=e),type:"text",placeholder:e.t("imageScanner.registries.registrytable.filters.placeholder.address"),class:"filter-input"},null,8,f),[[s.vModelText,E.filters.uriSearch]]),t[9]||(t[9]=(0,s.createElementVNode)("i",{class:"icon icon-search",style:{color:"#6C6C76","margin-left":"8px"}},null,-1))])]),(0,s.createElementVNode)("div",y,[(0,s.createElementVNode)("label",null,(0,s.toDisplayString)(e.t("imageScanner.registries.registrytable.header.repos")),1),(0,s.createElementVNode)("div",b,[(0,s.withDirectives)((0,s.createElementVNode)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>E.filters.repositorySearch=e),type:"text",placeholder:e.t("imageScanner.registries.registrytable.filters.placeholder.name"),class:"filter-input"},null,8,v),[[s.vModelText,E.filters.repositorySearch]]),t[10]||(t[10]=(0,s.createElementVNode)("i",{class:"icon icon-search",style:{color:"#6C6C76","margin-left":"8px"}},null,-1))])]),(0,s.createElementVNode)("div",S,[(0,s.createElementVNode)("label",null,(0,s.toDisplayString)(e.t("imageScanner.registries.registrytable.header.status")),1),(0,s.createVNode)(C,{value:E.filters.statusSearch,"onUpdate:value":t[4]||(t[4]=e=>E.filters.statusSearch=e),options:E.filterStatusOptions,"close-on-select":!0,multiple:!1},null,8,["value","options"])])])]),(0,s.createVNode)(V,{ref:"registryTable",headers:E.headers,schema:k.schema,namespaced:!1,"table-actions":!0,"row-actions":!0,search:!1,"key-field":"id","fetch-secondary-resources":k.fetchSecondaryResources,"fetch-page-secondary-resources":k.fetchPageSecondaryResources,"local-filter":k.filterRowsLocal,"api-filter":k.filterRowsApi,"use-query-params-for-simple-filtering":E.useQueryParamsForSimpleFiltering,onSelection:k.onSelectionChange},{"header-left":(0,s.withCtx)(()=>[(0,s.createElementVNode)("div",x,[E.canEdit?((0,s.openBlock)(),(0,s.createBlock)(N,{key:0,class:"table-btn","selected-registries":E.selectedRows?.map(e=>({name:e.metadata.name,namespace:e.metadata.namespace,currStatus:e.currStatus}))},null,8,["selected-registries"])):(0,s.createCommentVNode)("",!0),E.canDelete?((0,s.openBlock)(),(0,s.createElementBlock)("button",{key:1,class:"btn role-primary table-btn",disabled:!(E.selectedRows&&E.selectedRows.length),onClick:t[5]||(t[5]=e=>k.promptRemoveRegistry())},[t[11]||(t[11]=(0,s.createElementVNode)("i",{class:"icon icon-delete",style:{"margin-right":"8px"}},null,-1)),(0,s.createTextVNode)(" "+(0,s.toDisplayString)(e.t("imageScanner.registries.button.delete")||"Delete"),1)],8,w)):(0,s.createCommentVNode)("",!0),E.selectedRows.length>0?((0,s.openBlock)(),(0,s.createElementBlock)("div",R,(0,s.toDisplayString)(E.selectedRows.length)+" "+(0,s.toDisplayString)(E.selectedRows.length>1?e.t("imageScanner.registries.registrytable.selection.registries"):e.t("imageScanner.registries.registrytable.selection.registry")),1)):(0,s.createCommentVNode)("",!0)])]),_:1},8,["headers","schema","fetch-secondary-resources","fetch-page-secondary-resources","local-filter","api-filter","use-query-params-for-simple-filtering","onSelection"])],64)}var E=a(64470);function k(e,t,a,r,i,n){const o=(0,s.resolveComponent)("ResourceTable");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[(0,s.createVNode)(o,(0,s.mergeProps)({ref:"table"},e.$attrs,{schema:e.schema,rows:e.rows,"alt-loading":e.canPaginate&&!e.isFirstLoad,loading:e.loading,"group-by":e.groupBy,"group-sort":e.groupSort,groupable:e.groupable,groupTooltip:e.groupTooltip,groupOptions:e.groupOptions,"override-in-store":e.overrideInStore,headers:e.safeHeaders,namespaced:e.namespaced,"external-pagination-enabled":e.canPaginate,"external-pagination-result":e.paginationResult,onPaginationChanged:e.paginationChanged}),(0,s.createSlots)({_:2},[(0,s.renderList)(e.$slots,(t,a)=>({name:a,fn:(0,s.withCtx)(t=>[(0,s.renderSlot)(e.$slots,a,(0,s.normalizeProps)((0,s.guardReactiveProps)(t)))])}))]),1040,["schema","rows","alt-loading","loading","group-by","group-sort","groupable","groupTooltip","groupOptions","override-in-store","headers","namespaced","external-pagination-enabled","external-pagination-result","onPaginationChanged"])])}var D=a(72586),C=a(55008),N=(0,s.defineComponent)({name:"PaginatedResourceTable",components:{ResourceTable:C.A},mixins:[D.A],props:{schema:{type:Object,required:!0},headers:{type:Array,default:null},paginationHeaders:{type:Array,default:null},groupTooltip:{type:String,default:"resourceTable.groupBy.namespace"},groupBy:{type:String,default:null},groupSort:{type:String,default:null},groupOptions:{type:Array,default:null},groupable:{type:Boolean,default:null},namespaced:{type:Boolean,default:null},fetchSecondaryResources:{type:Function,default:null},overrideInStore:{type:String,default:void 0},fetchPageSecondaryResources:{type:Function,default:null}},data(){return{resource:this.schema.id}},async fetch(){this.fetchSecondaryResources&&await this.fetchSecondaryResources({canPaginate:this.canPaginate}),await this.$fetchType(this.resource,[],this.overrideInStore||this.inStore)},computed:{safeHeaders(){const e=this.canPaginate?this.paginationHeaders:this.headers,t=this.$store;return e||t.getters["type-map/headersFor"](this.schema,this.canPaginate)}},methods:{clearSelection(){const e=this.$refs.table;e.clearSelection()}}}),V=a(47433);const A=(0,V.A)(N,[["render",k]]);var L=A,B=a(65165),_=a(3607),M=a(68851),$=a(96234),U=a(45250),P=a.n(U),I=a(65921),F=a(50025);const O={key:0,class:"summary-section"};function z(e,t,a,r,i,n){const o=(0,s.resolveComponent)("RecentUpdatedRegistries"),l=(0,s.resolveComponent)("DistributionChart");return i.scanJobCRD&&i.scanJobCRD.length>0?((0,s.openBlock)(),(0,s.createElementBlock)("div",O,[(0,s.createVNode)(o,{"registry-status-list":i.registryStatusList},null,8,["registry-status-list"]),(0,s.createVNode)(l,{"filter-fn":n.filterByStatus,"chart-data":i.statusSummary,title:e.t("imageScanner.registries.StatusDistribution.title"),"color-prefix":"status",description:e.t("imageScanner.registries.StatusDistribution.subTitle"),tooltip:e.t("imageScanner.registries.StatusDistribution.tooltip")},null,8,["filter-fn","chart-data","title","description","tooltip"])])):(0,s.createCommentVNode)("",!0)}const q={class:"chart-section"},Y={class:"title"},j={class:"status-list"};function J(e,t,a,r,i,n){const o=(0,s.resolveComponent)("InfoTooltip"),l=(0,s.resolveComponent)("RegistryStatusUpdate");return(0,s.openBlock)(),(0,s.createElementBlock)("div",q,[(0,s.createElementVNode)("div",Y,[(0,s.createTextVNode)((0,s.toDisplayString)(e.t("imageScanner.registries.recentUpdatedRegistries.title"))+" ",1),(0,s.createVNode)(o,{tooltip:e.t("imageScanner.registries.recentUpdatedRegistries.tooltip")},null,8,["tooltip"])]),(0,s.createElementVNode)("div",j,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.registryStatusList,(e,t)=>((0,s.openBlock)(),(0,s.createBlock)(l,{key:t,"registry-status":e},null,8,["registry-status"]))),128))])])}const G={key:0,class:"registry-status-record"},K={class:"uri"},H={class:"prev-status"},Q={class:"curr-status"},X={class:"update-time"},W={key:1,class:"registry-status-record"};function Z(e,t,a,r,i,n){const o=(0,s.resolveComponent)("RouterLink"),l=(0,s.resolveComponent)("StatusBadge");return a.registryStatus.registryName?((0,s.openBlock)(),(0,s.createElementBlock)("div",G,[(0,s.createVNode)(o,{class:"registry-name",to:n.registryDetailLink},{default:(0,s.withCtx)(()=>[(0,s.createTextVNode)((0,s.toDisplayString)(a.registryStatus.registryName),1)]),_:1},8,["to"]),(0,s.createElementVNode)("div",K,(0,s.toDisplayString)(a.registryStatus.uri),1),(0,s.createElementVNode)("div",H,[(0,s.createVNode)(l,{status:a.registryStatus.prevScanStatus},null,8,["status"])]),t[0]||(t[0]=(0,s.createElementVNode)("div",{class:"arrow"}," > ",-1)),(0,s.createElementVNode)("div",Q,[(0,s.createVNode)(l,{status:a.registryStatus.currStatus},null,8,["status"])]),(0,s.createElementVNode)("div",X,(0,s.toDisplayString)(`${n.statusUpdateTime(a.registryStatus.lastTransitionTime)}`),1)])):((0,s.openBlock)(),(0,s.createElementBlock)("div",W,[...t[1]||(t[1]=[(0,s.createElementVNode)("div",{class:"no-data"},null,-1)])]))}var ee=a(1293),te=a(51481),ae={name:"RegistryStatusUpdate",components:{StatusBadge:ee.A},props:{registryStatus:{type:Object,required:!0}},data(){return{PRODUCT_NAME:E.KR,PAGE:E.KL,RESOURCE:E.bD}},methods:{statusUpdateTime(e){return`${(0,te.qr)(Math.ceil(Date.now()/1e3)-Math.ceil(new Date(e).getTime()/1e3)).label} ${this.t("imageScanner.general.ago")}`}},computed:{registryDetailLink(){return{name:"c-cluster-product-resource-namespace-id",params:{cluster:this.$route.params.cluster,product:E.KR,resource:E.bD.REGISTRY,namespace:this.registryStatus.namespace,id:this.registryStatus.registryName}}}}};a(78132);const se=(0,V.A)(ae,[["render",Z],["__scopeId","data-v-517da5ed"]]);var re=se,ie=a(23986),ne={name:"RecentUpdatedRegistries",components:{RegistryStatusUpdate:re,InfoTooltip:ie.A},props:{registryStatusList:{type:Array,required:!0}}};a(64067);const oe=(0,V.A)(ne,[["render",J],["__scopeId","data-v-70087338"]]);var le=oe,ce=a(92698),de={name:"RegistriesOverview",components:{RecentUpdatedRegistries:le,DistributionChart:ce.A},data(){const e=[{value:"any",label:this.t("imageScanner.general.any")},{value:"scheduled",label:this.t("imageScanner.enum.status.scheduled")},{value:"pending",label:this.t("imageScanner.enum.status.pending")},{value:"inprogress",label:this.t("imageScanner.enum.status.inprogress")},{value:"complete",label:this.t("imageScanner.enum.status.complete")},{value:"failed",label:this.t("imageScanner.enum.status.failed")}];return{registriesCRD:[],scanJobCRD:[],PRODUCT_NAME:E.KR,rows:[],registryStatusList:[],latestUpdateTime:null,statusSummary:{},selectedStatus:e[0].value,headers:B.Dv,keepAliveTimer:null,useQueryParamsForSimpleFiltering:!1,canEdit:(0,I.V)(this.$store.getters).canEdit}},async fetch(){await this.loadData()},beforeUnmount(){clearInterval(this.keepAliveTimer)},methods:{async loadData(){this.scanJobCRD=await this.$store.dispatch("cluster/findAll",{type:E.bD.SCAN_JOB}),await this.preprocessData(),clearInterval(this.keepAliveTimer),this.keepAliveTimer=setInterval(async()=>{await this.preprocessData()},2e4)},async preprocessData(){this.registryStatusList=[],this.statusSummary={};const e=this.getSummaryData(this.scanJobCRD);this.registryStatusList=e.registryStatusList,this.statusSummary=e.statusSummary},refresh(){this.loadData()},filterByStatus(e){this.selectedStatus=e},openAddEditRegistry(){this.$router.push({name:`c-cluster-${E.KR}-resource-create`,params:{resource:E.bD.REGISTRY,cluster:this.$route.params.cluster,product:E.KR}})},onSelectionChange(e){this.selectedRows=e||[]},async promptRemoveRegistry(){const e=this.$refs.registryTable.$refs.table.$refs.table,t=(0,M.jq)(e.availableActions,"action","promptRemove");t&&(e.setBulkActionOfInterest(t),e.applyTableAction(t))},getSummaryData(e){const t=new Map,a=[],s={pending:0,scheduled:0,inprogress:0,complete:0,failed:0};e.sort((e,t)=>e.status&&e.status.conditions&&Array.isArray(e.status.conditions)&&0!==e.status.conditions.length?t.status&&t.status.conditions&&Array.isArray(t.status.conditions)&&0!==t.status.conditions.length?this.getLastTransitionTime(t.status.conditions)-this.getLastTransitionTime(e.status.conditions):-1:1),e.forEach(e=>{if(e?.spec?.registry&&e?.metadata?.namespace){const a=`${e.metadata.namespace}/${e.spec.registry}`;if(t.has(a)){const s=t.get(a),r=this.getStatusResult(e),i=e.status?.conditions||[],n=e.spec.registry,o=e.metadata.namespace,l=this.getUri(e.metadata.annotations["sbomscanner.kubewarden.io/registry"]),c=e.status?.conditions?this.getLastTransitionTime(e.status.conditions):new Date(e.metadata.creationTimestamp).getTime(),d=e.status?.completionTime?new Date(e.status.completionTime).getTime():0;s&&s.length>0&&s.length<2&&s.push({statusResult:r,conditions:i,registryName:n,namespace:o,uri:l,lastTransitionTime:c,completionTime:d}),t.set(a,s)}else t.set(a,[{statusResult:this.getStatusResult(e),conditions:e.status?.conditions||[],registryName:e.spec.registry,namespace:e.metadata.namespace,uri:this.getUri(e.metadata.annotations["sbomscanner.kubewarden.io/registry"]),lastTransitionTime:e.status?.conditions?this.getLastTransitionTime(e.status.conditions):new Date(e.metadata.creationTimestamp).getTime(),completionTime:e.status?.completionTime?new Date(e.status.completionTime).getTime():0}])}});const r=Array.from(t.values()),i=r.slice(0,5);r.forEach(e=>{Object.prototype.hasOwnProperty.call(s,e[0].statusResult.type.toLowerCase())&&s[e[0].statusResult.type.toLowerCase()]++}),i.forEach(e=>{a.push({registryName:e[0].registryName,namespace:e[0].namespace,uri:e[0].uri,prevScanStatus:this.getPreviousStatus(e),currStatus:e[0].statusResult.type.toLowerCase(),lastTransitionTime:Math.max(new Date(e[0].lastTransitionTime),new Date(e[0].completionTime))})}),a.sort((e,t)=>new Date(t.lastTransitionTime)-new Date(e.lastTransitionTime)).slice(0,5);while(a.length<5)a.push({registryName:"",namespace:"",uri:"",prevScanStatus:"",currStatus:"",lastTransitionTime:(new Date).toISOString()});return{registryStatusList:a,statusSummary:s}},getLastTransitionTime(e){let t=0;return e.forEach(e=>{t=Math.max(t,new Date(e.lastTransitionTime).getTime())}),t},getUri(e){try{const t=JSON.parse(e);return t.spec.uri||""}catch(t){return""}},getStatusResult(e){if(!e.status)return{type:"Pending",lastTransitionTime:null,statusIndex:-1};const t=e.status.conditions?.findIndex(e=>"True"===e.status);return t>-1?{type:e.status.conditions[t].type,lastTransitionTime:e.status.conditions[t].lastTransitionTime,message:e.status.conditions[t].message,statusIndex:t}:{type:"Pending",lastTransitionTime:null,statusIndex:-1}},getPreviousStatus(e){if(e&&e[0]&&e[0].statusResult&&e[0].statusResult.statusIndex>0){const t=e[0].statusResult.statusIndex;return t<3?e[0].conditions[t-1].type.toLowerCase():e[0].conditions[t-2].type.toLowerCase()}return e&&e[1]?e[1].statusResult.type.toLowerCase():"none"}},computed:{schema(){return this.$store.getters["cluster/schemaFor"](E.bD.REGISTRY)},canPaginate(){return this.$store.getters["cluster/paginationEnabled"](E.bD.REGISTRY)}}};a(45709);const ue=(0,V.A)(de,[["render",z],["__scopeId","data-v-0ba7aea9"]]);var pe=ue,ge=a(32090),me=a(23464),he=a.n(me),fe={name:"Registries",components:{PaginatedResourceTable:L,LabeledSelect:$.A,ScanButton:_.A,RegistriesOverview:pe,Masthead:ge.A},props:{statusFilterLink:{type:String,default:"any"}},data(){const e=[{value:"any",label:this.t("imageScanner.general.any")},{value:"scheduled",label:this.t("imageScanner.enum.status.scheduled")},{value:"pending",label:this.t("imageScanner.enum.status.pending")},{value:"inprogress",label:this.t("imageScanner.enum.status.inprogress")},{value:"complete",label:this.t("imageScanner.enum.status.complete")},{value:"failed",label:this.t("imageScanner.enum.status.failed")}];return{headers:B.Dv,latestUpdateTime:new Date,selectedRows:[],filters:{registrySearch:"",namespaceSearch:"",uriSearch:"",repositorySearch:"",statusSearch:e[0]},debouncedFilters:{registrySearch:"",namespaceSearch:"",uriSearch:"",repositorySearch:"",statusSearch:e[0]},filterStatusOptions:e,keepAliveTimer:null,useQueryParamsForSimpleFiltering:!1,canEdit:(0,I.V)(this.$store.getters).canEdit,canDelete:(0,I.V)(this.$store.getters).canDelete}},watch:{filters:{handler:P().debounce(function(e){this.debouncedFilters={...e}},500),deep:!0},statusFilterLink(e,t){e!==t&&(this.filters.statusSearch=e)}},methods:{onSelectionChange(e){this.selectedRows=e||[]},async promptRemoveRegistry(){const e=this.$refs.registryTable.$refs.table.$refs.table,t=(0,M.jq)(e.availableActions,"action","promptRemove");t&&(e.setBulkActionOfInterest(t),e.applyTableAction(t))},async fetchSecondaryResources({canPaginate:e}){if(!e)return await this.$store.dispatch("cluster/findAll",{type:E.bD.SCAN_JOB})},async fetchPageSecondaryResources({force:e,page:t}){if(!t?.length)return;const a={force:e,pagination:new F.YU({filters:F.eY.createMultipleFields(t.map(e=>new F.Js({field:"id",value:`${e.metadata.namespace}/${e.metadata.name}`})))})},s=await this.$store.dispatch("cluster/findPage",{type:E.bD.SCAN_JOB,opt:a});return s},filterRowsLocal(e){const t=this.debouncedFilters;return e.filter(e=>{const a=!t.registrySearch||e.metadata?.name?.toLowerCase().includes(t.registrySearch.toLowerCase()),s=!t.namespaceSearch||e.metadata?.namespace?.toLowerCase().includes(t.namespaceSearch.toLowerCase()),r=!t.uriSearch||e.spec?.uri?.toLowerCase().includes(t.uriSearch.toLowerCase()),i=!t.repositorySearch||(e.spec?.repositories||[]).some(e=>e.toLowerCase().includes(t.repositorySearch.toLowerCase())),n=!t.statusSearch||"object"===typeof t.statusSearch&&"any"===t.statusSearch.value.toLowerCase()||"string"===typeof t.statusSearch&&"any"===t.statusSearch.toLowerCase()||"object"===typeof e.scanRec?.currStatus&&e.scanRec?.currStatus.value.toLowerCase()===t.statusSearch.value.toLowerCase()||"string"===typeof e.scanRec?.currStatus&&e.scanRec?.currStatus.toLowerCase()===t.statusSearch.toLowerCase();return a&&s&&r&&i&&n})},filterRowsApi(e){const t=this.debouncedFilters,a=[{field:"metadata.name",value:t.registrySearch,equals:!0,exact:!1},{field:"metadata.namespace",value:t.namespaceSearch,equals:!0,exact:!1},{field:"spec.uri",value:t.uriSearch,equals:!0,exact:!1},{field:"spec.repositories",value:t.repositorySearch,equals:!0,exact:!1},{field:"scanRec.currStatus",value:"object"===typeof t.statusSearch?t.statusSearch.value:t.statusSearch,equals:!0,exact:!1}],s=F.eY.createMultipleFields(a);return e.filters.push(s),e}},computed:{schema(){return this.$store.getters["cluster/schemaFor"](E.bD.REGISTRY)},canPaginate(){const e={id:E.bD.REGISTRY};return this.$store.getters["cluster/paginationEnabled"]?.(e)},latestUpdateDateText(){return he()(new Date(this.latestUpdateTime).getTime()).format("MMM D, YYYY")},latestUpdateTimeText(){return he()(new Date(this.latestUpdateTime).getTime()).format("h:mm a")}}};a(47073);const ye=(0,V.A)(fe,[["render",T],["__scopeId","data-v-adf8cebc"]]);var be=ye},70922:function(e,t,a){"use strict";e.exports=a.p+"img/add.7080ef16.svg"},78132:function(e,t,a){var s=a(85812);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("41950c61",s,!0,{sourceMap:!1,shadowMode:!1})},81105:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),i=a(40935),n=a.n(i),o=n()(r());o.push([e.id,".badge[data-v-6ae8845a]{display:inline-block;padding:1px 8px;align-items:center;border-radius:30px}.badge.pending[data-v-6ae8845a]{background:rgba(195,198,213,.3);color:rgba(0,0,0,.65)}body.theme-dark .badge.pending[data-v-6ae8845a]{color:hsla(0,0%,100%,.65)}.badge.scheduled[data-v-6ae8845a]{background:rgba(15,207,240,.3);color:rgba(0,0,0,.65)}body.theme-dark .badge.scheduled[data-v-6ae8845a]{color:hsla(0,0%,100%,.65)}.badge.in-progress[data-v-6ae8845a]{background:rgba(62,152,211,.3);color:rgba(0,0,0,.65)}body.theme-dark .badge.in-progress[data-v-6ae8845a]{color:hsla(0,0%,100%,.65)}.badge.complete[data-v-6ae8845a]{background:rgba(93,154,93,.3);color:rgba(0,0,0,.65)}body.theme-dark .badge.complete[data-v-6ae8845a]{color:hsla(0,0%,100%,.65)}.badge.disabled[data-v-6ae8845a],.badge.failed[data-v-6ae8845a]{background:#e03231;color:#fff}.badge.enabled[data-v-6ae8845a]{background:rgba(93,154,93,.3);color:rgba(0,0,0,.65)}body.theme-dark .badge.enabled[data-v-6ae8845a]{color:hsla(0,0%,100%,.65)}.badge .text[data-v-6ae8845a]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;line-clamp:1;overflow:hidden;text-overflow:ellipsis;font-family:Lato;font-size:12px;font-style:normal;font-weight:400;line-height:19px}.badge .text.none[data-v-6ae8845a]{color:var(--muted)}",""]),t["default"]=o},84941:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),i=a(40935),n=a.n(i),o=n()(r());o.push([e.id,".page[data-v-5221925a]{display:flex;flex-direction:column;padding:0 100px 0 0;min-height:100%}.header-section[data-v-5221925a]{display:flex;align-items:flex-start;gap:24px;align-self:stretch;margin-bottom:24px}.header-section .header-left[data-v-5221925a]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:8px;flex:1 0 0}.header-section .description[data-v-5221925a]{max-width:900px;align-self:stretch;color:var(--disabled-text);font-family:Lato;font-size:14px;font-style:normal;font-weight:400;line-height:21px}.header-section .header-btn[data-v-5221925a]{height:40px}",""]),t["default"]=o},85812:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),i=a(40935),n=a.n(i),o=n()(r());o.push([e.id,".no-data[data-v-517da5ed]{color:var(--disabled-text);font-family:Lato;font-size:14px;font-style:normal;font-weight:400;line-height:21px;min-height:21px;width:100%}.registry-status-record[data-v-517da5ed]{display:flex;padding:4px 0;align-items:center;align-self:stretch}.registry-status-record .registry-name[data-v-517da5ed]{flex:6;color:#5696ce}.registry-status-record .registry-name[data-v-517da5ed],.registry-status-record .uri[data-v-517da5ed]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;overflow:hidden;text-overflow:ellipsis;font-family:Lato;font-size:14px;font-style:normal;font-weight:400;line-height:21px}.registry-status-record .uri[data-v-517da5ed]{flex:10;word-break:break-all;margin-right:8px}.registry-status-record .prev-status[data-v-517da5ed]{flex:5}.registry-status-record .arrow[data-v-517da5ed]{flex:2;width:16px;height:16px}.registry-status-record .curr-status[data-v-517da5ed]{flex:5}.registry-status-record .update-time[data-v-517da5ed]{color:var(--disabled-text);flex:6;margin-left:8px;font-family:Lato;font-size:14px;font-style:normal;font-weight:400;line-height:21px}",""]),t["default"]=o},95463:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),i=a(40935),n=a.n(i),o=n()(r());o.push([e.id,".scan-btn[data-v-1e454b60]{display:flex;align-items:center;gap:12px}",""]),t["default"]=o}}]);
//# sourceMappingURL=sbomscanner-ui-ext-0.5.0-rc3.umd.min.list.js.map