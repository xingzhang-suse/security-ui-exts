(("undefined"!==typeof self?self:this)["webpackChunksbomscanner_0_4_2"]=("undefined"!==typeof self?self:this)["webpackChunksbomscanner_0_4_2"]||[]).push([[739],{46177:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return b}});var r=t(9274);const n={class:"filled-height"},i={class:"row"},l={class:"col span-9"},o={class:"row mt-16"};function s(e,a,t,s,c,u){const d=(0,r.resolveComponent)("NameNsDescription"),p=(0,r.resolveComponent)("LabeledInput"),m=(0,r.resolveComponent)("Checkbox"),v=(0,r.resolveComponent)("CruResource");return(0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createVNode)(v,{"done-route":e.doneRoute,mode:e.mode,resource:e.value,subtypes:[],"validation-passed":!0,errors:c.errors,"cancel-event":!0,onError:a[3]||(a[3]=e=>c.errors=e),onFinish:e.save,onCancel:e.done},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(d,{value:e.value,mode:e.mode,namespaced:!1,"description-placeholder":"imageScanner.vexManagement.cru.desc.placeholder","onUpdate:value":a[0]||(a[0]=a=>e.$emit("input",a))},null,8,["value","mode"]),(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("div",l,[(0,r.createVNode)(p,{value:e.value.spec.url,"onUpdate:value":a[1]||(a[1]=a=>e.value.spec.url=a),mode:e.mode,label:e.t("imageScanner.vexManagement.cru.uri.label"),"placeholder-key":"imageScanner.vexManagement.cru.uri.placeholder",required:!0},null,8,["value","mode","label"])])]),(0,r.createElementVNode)("div",o,[(0,r.createVNode)(m,{value:e.value.spec.enabled,"onUpdate:value":a[2]||(a[2]=a=>e.value.spec.enabled=a),tooltip:e.t("imageScanner.vexManagement.cru.enable.tooltip"),"data-testid":"imageScanner-vexManagement-cru-enable-checkbox",class:"check",type:"checkbox","label-key":"imageScanner.vexManagement.cru.enable.label",mode:e.mode},null,8,["value","tooltip","mode"])])]),_:1},8,["done-route","mode","resource","errors","onFinish","onCancel"])])}var c=t(40527),u=t(52115),d=t(42200),p=t(69552),m=t(91825),v=t(74724),g={name:"CruVexHub",components:{LabeledInput:p.o,NameNsDescription:c.A,CruResource:u.A,Checkbox:d.S},mixins:[m.A],data(){return this.value.spec||(this.value.spec={url:"",enabled:!0}),{errors:null,PAGE:v.KL,PRODUCT_NAME:v.KR}}},h=(t(96888),t(47433));const f=(0,h.A)(g,[["render",s],["__scopeId","data-v-26ff094b"]]);var b=f},53860:function(e,a,t){var r=t(91076);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=t(74825).A;n("0d39165e",r,!0,{sourceMap:!1,shadowMode:!1})},66887:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return w}});var r=t(9274);const n={class:"filled-height"},i={class:"registry-input-label"},l={class:"row"},o={class:"col span-6"},s={class:"col span-6"},c={class:"registry-input-label mt-24"},u={class:"row"},d={class:"col span-6"},p={key:0,class:"row"},m={class:"col span-12"},v={class:"m-0 mb-5"},g=["href"],h={class:"m-0"},f={class:"row"},b={class:"col span-6"},S={class:"col span-3"};function N(e,a,t,N,y,E){const _=(0,r.resolveComponent)("NameNsDescription"),C=(0,r.resolveComponent)("LabeledSelect"),V=(0,r.resolveComponent)("LabeledInput"),I=(0,r.resolveComponent)("Banner"),A=(0,r.resolveComponent)("CruResource");return(0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createVNode)(A,{"done-route":e.doneRoute,mode:e.mode,resource:e.value,subtypes:[],errors:y.errors,"validation-passed":E.validationPassed,onFinish:E.finish,onCancel:e.done},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(_,{"name-label":"imageScanner.registries.configuration.cru.registry.label",value:e.value,mode:e.mode,"onUpdate:value":a[0]||(a[0]=a=>e.$emit("input",a))},null,8,["value","mode"]),(0,r.createElementVNode)("div",i,(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.registry.label")),1),(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",o,[(0,r.createVNode)(C,{value:e.value.spec.catalogType,"onUpdate:value":a[1]||(a[1]=a=>e.value.spec.catalogType=a),"data-testid":"registry-type-select",label:e.t("imageScanner.registries.configuration.cru.registry.type.label"),options:E.REGISTRY_TYPE_OPTIONS,"option-key":"value","option-label":"label",required:""},null,8,["value","label","options"])]),(0,r.createElementVNode)("div",s,[(0,r.createVNode)(V,{value:e.value.spec.uri,"onUpdate:value":a[2]||(a[2]=a=>e.value.spec.uri=a),label:e.t("imageScanner.registries.configuration.cru.registry.uri.label"),placeholder:e.t("imageScanner.registries.configuration.cru.registry.uri.placeholder"),required:""},null,8,["value","label","placeholder"])])]),(0,r.createElementVNode)("div",c,(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.label")),1),(0,r.createElementVNode)("div",u,[(0,r.createElementVNode)("div",d,[(0,r.createVNode)(C,{value:e.value.spec.authSecret,"onUpdate:value":a[3]||(a[3]=a=>e.value.spec.authSecret=a),"data-testid":"auth-secret-select",label:e.t("imageScanner.registries.configuration.cru.authentication.label"),mode:e.mode,options:E.options,loading:y.authLoading},null,8,["value","label","mode","options","loading"])])]),"create"===e.value.spec.authSecret?((0,r.openBlock)(),(0,r.createElementBlock)("div",p,[(0,r.createElementVNode)("div",m,[(0,r.createVNode)(I,{color:"info"},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("p",v,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine1_start"))+" ",1),(0,r.createElementVNode)("a",{href:E.secretCreateUrl,target:"_blank"},(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine1_link")),9,g),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine1_end")),1)]),(0,r.createElementVNode)("p",h,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine2_start"))+" ",1),(0,r.createElementVNode)("a",{href:"#",onClick:a[4]||(a[4]=(0,r.withModifiers)((...e)=>E.refreshList&&E.refreshList(...e),["prevent"]))},(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine2_link")),1),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.authentication.createDescriptionLine2_end")),1)])])]),_:1})])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["registry-input-label",{"mt-24":"create"!==e.value.spec.authSecret}])},(0,r.toDisplayString)(e.t("imageScanner.registries.configuration.cru.scan.label")),3),(0,r.createElementVNode)("div",f,[(0,r.createElementVNode)("div",b,[(0,r.createVNode)(C,{value:e.value.spec.repositories,"onUpdate:value":a[5]||(a[5]=a=>e.value.spec.repositories=a),"data-testid":"registry-scanning-repository-names",taggable:!0,searchable:!0,"push-tags":!0,"close-on-select":!1,mode:e.mode,multiple:!0,label:e.t("imageScanner.registries.configuration.cru.scan.repoName"),placeholder:e.value.spec.catalogType===E.REGISTRY_TYPE.OCI_DISTRIBUTION?e.t("imageScanner.registries.configuration.cru.scan.placeholder.ociDistribution"):e.t("imageScanner.registries.configuration.cru.scan.placeholder.nocatalog"),options:e.value.spec.repositories||[],disabled:"view"===e.mode,required:e.value.spec.catalogType===E.REGISTRY_TYPE.NO_CATALOG},null,8,["value","mode","label","placeholder","options","disabled","required"])]),(0,r.createElementVNode)("div",S,[(0,r.createVNode)(C,{value:E.selectedScanInterval,"onUpdate:value":a[6]||(a[6]=e=>E.selectedScanInterval=e),"data-testid":"registry-scanning-interval-select",placeholder:e.t("imageScanner.registries.configuration.cru.scan.schedule.placeholder",{manualScan:e.t("imageScanner.registries.configuration.cru.scan.schedule.manualScan")}),options:E.SCAN_INTERVAL_OPTIONS,"option-key":"value","option-label":"label",label:e.t("imageScanner.registries.configuration.cru.scan.schedule.label"),required:""},null,8,["value","placeholder","options","label"])])])]),_:1},8,["done-route","mode","resource","errors","validation-passed","onFinish","onCancel"])])}var y=t(91825),E=t(69552),_=t(40527),C=t(52115),V=t(96234),I=t(68745),A=t(35664),T=t(53838),L=t(64470),R=t(17259),x={name:"CruRegistry",components:{LabeledInput:E.o,NameNsDescription:_.A,CruResource:C.A,LabeledSelect:V.A,Banner:I.A},mixins:[y.A],async fetch(){this.allSecrets=await this.$store.dispatch(`${this.inStore}/findAll`,{type:A.bB})},data(){return this.value.spec||(this.value.spec={catalogType:T.ng.OCI_DISTRIBUTION,authSecret:"",uri:"",repositories:[],scanInterval:T.nb.MANUAL}),null===this.value.spec.scanInterval&&(this.value.spec.scanInterval=T.nb.MANUAL),{inStore:this.$store.getters["currentProduct"].inStore,errors:null,allSecrets:null,filteredSecrets:null,PAGE:L.KL,PRODUCT_NAME:L.KR,authLoading:!1}},computed:{options(){const e=[{label:this.t("imageScanner.registries.configuration.cru.authentication.create"),value:"create",kind:"highlighted"},{label:"divider",disabled:!0,kind:"divider"},{label:this.t("generic.none"),value:""}];if(!this.allSecrets)return e;const a=this.value.metadata?.namespace??"default",t=this.allSecrets.filter(e=>e.metadata.namespace===a&&e._type===R.J.DOCKER_JSON).map(e=>{const a=e.metadata.name;return{label:a,value:a}});return[...e,...t]},SCAN_INTERVAL_OPTIONS(){return T.FW},selectedScanInterval:{get(){const e=this.value.spec.scanInterval;return e&&e!==T.nb.MANUAL?e:T.nb.MANUAL},set(e){this.value.spec.scanInterval=e}},REGISTRY_TYPE_OPTIONS(){return T.Qk},REGISTRY_TYPE(){return T.ng},validationPassed(){const e=this.value?.spec||{},a=!!this.value?.metadata?.name?.trim(),t=!!e.catalogType,r=!!e.uri?.trim(),n=e.catalogType===T.ng.NO_CATALOG,i=!n||!!e.repositories?.length,l="create"!==e.authSecret;return a&&t&&r&&i&&l},secretCreateUrl(){const e=this.$route.params.cluster;return`${L.$O.includes(window.location.host)?"":"/dashboard"}/c/${e}/explorer/secret/create?scope=namespaced`}},methods:{async finish(e){this.value.spec.scanInterval===T.nb.MANUAL&&delete this.value.spec.scanInterval;try{await this.save(e)}catch(a){this.errors=[a]}finally{this.errors&&0!==this.errors.length||this.$router.push({name:`c-cluster-${L.KR}-${L.KL.REGISTRIES}`,params:{cluster:this.$route.params.cluster,product:L.KR}})}},async refreshList(){this.authLoading=!0;try{this.allSecrets=await this.$store.dispatch(`${this.inStore}/findAll`,{type:A.bB})}catch(e){this.errors=[e]}finally{this.authLoading=!1}}}},k=(t(53860),t(47433));const D=(0,k.A)(x,[["render",N],["__scopeId","data-v-422a76f6"]]);var w=D},91076:function(e,a,t){"use strict";t.r(a);var r=t(36758),n=t.n(r),i=t(40935),l=t.n(i),o=l()(n());o.push([e.id,".registry-input-label[data-v-422a76f6]{margin-bottom:16px;font-size:16px;line-height:20px;font-weight:400;font-family:Lato,sans-serif;color:var(--disabled-text);display:block}.mt-24[data-v-422a76f6]{margin-top:24px}",""]),a["default"]=o},94456:function(e,a,t){"use strict";t.r(a);var r=t(36758),n=t.n(r),i=t(40935),l=t.n(i),o=l()(n());o.push([e.id,".mt-16[data-v-26ff094b]{margin-top:16px}",""]),a["default"]=o},96888:function(e,a,t){var r=t(94456);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=t(74825).A;n("95f0e360",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=sbomscanner-0.4.2.umd.min.edit.js.map